/*!
 * Bouer.js v3.1.2
 * Copyright Easy.js 2018-2020 | 2021-2025 Afonso Matumona
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Bouer=t()}(this,(function(){"use strict";var e,t,n=(e="[Bouer]",{log:function(t){console.log.apply(null,[e].concat(Error(t)))},error:function(t){console.error.apply(null,[e].concat(Error(t)))},warn:function(t){console.warn.apply(null,[e].concat(Error(t)))},info:function(t){console.info.apply(null,[e].concat(Error(t)))}}),r=function(){function e(){}return e.on=function(t,n){return d(this.events[t])&&(this.events[t]=[]),this.events[t].push(n),{eventName:t,callback:n,off:function(){return e.off(t,n)}}},e.off=function(e,t){var n=this.events[e]||[];return n.splice(n.indexOf(t),1),!0},e.once=function(t,r){var o={},i=e.on(t,(function(e){o.onemit&&o.onemit(e)}));try{r(o)}catch(e){n.error(V(e))}finally{e.off(t,i.callback)}},e.emit=function(e,t){try{N(this.events[e]||[],(function(e){return e(t)}))}catch(e){n.error(V(e))}},e.events={},e}(),o={set:function(e,t,n){return Object.defineProperty(e,t,n)},descriptor:function(e,t){return Object.getOwnPropertyDescriptor(e,t)},transfer:function(e,t,n){var r=this.descriptor(t,n);n in e||(e[n]=void 0),this.set(e,n,r)}},i=function(e,t,n){var r=this;this.destroy=function(){var e=r.descriptor.watches.indexOf(r);-1!==e&&r.descriptor.watches.splice(e,1),(r.onDestroy||function(){})()},this.descriptor=e,this.property=e.propName,this.callback=t,n&&(this.node=n.node,this.onDestroy=n.onDestroy)},a=function(){function e(t){var i=this;this._IRT_=!0,this.watches=[],this.fnComputed=null,this.get=function(){var e=i.computed().get;r.emit("BeforeGet",i),i.propValue=i.isComputed?D(e.call(i.context)):i.propValue;var t=i.propValue;return r.emit("AfterGet",i),t},this.set=function(t){if(!(i.propValue===t||Number.isNaN(i.propValue)&&Number.isNaN(t))){var o=i.computed().set;if(i.isComputed&&o)D(o.call(i.context,t));else if(i.isComputed&&d(o))return;if(i.propValueOld=i.propValue,r.emit("BeforeSet",i),f(t)||Array.isArray(t)){if(typeof i.propValue!=typeof t)return n.error("Cannot set “"+typeof t+"” in “"+i.propName+"” property.");if(Array.isArray(t)){e.transform({data:t,descriptor:i,context:i.context});var a=i.propValue;a.splice(0,a.length),a.push.apply(a,t)}else f(t)&&(t instanceof Node?i.propValue=t:(e.transform({data:t,context:i.context}),d(i.propValue)?i.propValue=t:_(t,i.propValue)))}else i.propValue=t;r.emit("AfterSet",i),i.notify()}},this.propName=t.propName,this.propSource=t.srcObject,this.context=t.context,this.baseDescriptor=o.descriptor(this.propSource,this.propName),this.propValue=this.baseDescriptor.value,this.isComputed="function"==typeof this.propValue&&"$computed"===this.propValue.name,this.isComputed&&(this.fnComputed=this.propValue,this.propValue=void 0),"function"!=typeof this.propValue||this.isComputed||(this.propValue=this.propValue.bind(this.context))}return e.prototype.computed=function(){if(!this.isComputed)return{get:function(){},set:function(e){}};var e=this.fnComputed.call(this.context);if(d(e))throw new Error("Invalid value used as return in “function $computed(){...}”.");var t=f(e)||v(e);return{get:t&&"get"in e?e.get:function(){return e},set:t&&"set"in e?e.set:void 0}},e.prototype.notify=function(){var e=this,t=f(this.propValue);N(this.watches,(function(n){var o=t?r.on("AfterGet",(function(e){if(n.property!==e.propName){var t=n;-1==e.watches.indexOf(t)&&e.watches.push(n)}})):{off:function(){}};n.callback.call(e.context,e.propValue,e.propValueOld),o.off()}))},e.prototype.onChange=function(e,t){var n=new i(this,e,{node:t});return this.watches.push(n),n},e.transform=function(t){var r=t.context,i=function(t,a,s,u,c){if(Array.isArray(t)){if(null==u)return n.warn("Cannot transform this array to a reactive one because no reactive object was provided"),t;if(-1!==a.indexOf(t))return t;a.push(t);var l=t,d={};Object.setPrototypeOf(l,Object.create(Array.prototype));var p=Object.getPrototypeOf(l);return N(["push","pop","unshift","shift","splice"],(function(e){d[e]=l[e].bind(l),p[e]=function(){var t=l.slice(),n=[].slice.call(arguments);switch(e){case"push":case"unshift":N(A(n),(function(e){(f(e)||Array.isArray(e))&&i(e,[],[])}))}var o=d[e].apply(l,n);return N(u.watches,(function(o){return o.callback.call(r,l,t,{method:e,args:n})})),o}})),l}return f(t)?(-1!==a.indexOf(t)||(a.push(t),N(c||Object.keys(t),(function(n){var u=t;if("value"in o.descriptor(t,n)){var c=u[n];if(!(c instanceof Object&&(c._IRT_||c instanceof Node))){var l=new e({propName:n,srcObject:t,context:r});o.set(t,n,l),Array.isArray(c)?(i(c,a,s,l),N(c,(function(e){return i(e,a,s)}))):f(c)&&i(c,a,s)}}})),a.splice(a.indexOf(t),1),s.push(t)),t):t};return i(t.data,[],[],t.descriptor,t.keys)},e}(),s={skip:"e-skip",build:"e-build",array:"e-array",if:"e-if",elseif:"e-else-if",else:"e-else",show:"e-show",req:"e-req",for:"e-for",data:"data",def:"e-def",wait:"wait-data",text:"e-text",bind:"e-bind",property:"e-",skeleton:"e-skeleton",route:"route-view",href:":href",entry:"e-entry",on:"on:",silent:"--s",slot:"slot",ref:"ref",put:"e-put",builtInEvents:{add:"add",compile:"compile",request:"request",response:"response",fail:"fail",done:"done"},check:function(e,t){return g(e.nodeName,t)},isConstant:function(e){var t=this;return-1!==Object.keys(this).map((function(e){return t[e]})).indexOf(e)}},u=(t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={};return N(e,(function(e){d(e)||N(Object.keys(e),(function(t){o.transfer(n,e,t)}))})),n},{obj:t,mixin:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t.apply({},n);return N(Object.keys(i),(function(t){var n=t in e;if(o.transfer(e,i,t),n){var r=e;r[t]=r[t]}})),e},array:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[];return N(e,(function(e){if(!d(e))return Array.isArray(e)?void N(Object.keys(e),(function(t){var r=e[t];d(r)||(Array.isArray(r)?[].push.apply(n,r):n.push(r))})):n.push(e)})),n},matcher:function(e,t){var n=function(e,t){N(Object.keys(e),(function(n){if(!(n in t)){var r=n in e;o.transfer(t,e,n),r&&(e[n]=e[n])}}))};n(e,t),n(t,e)}});function c(e,t){if(!e)return Promise.reject(new Error("Invalid Url"));var n=function(e,n){var r=(t||{})[e];return r||n},r=n("headers",{}),o=n("method","get"),i=n("body",void 0),a=n("body",(function(e){})),s=function(e){if(!(!Y.documentMode||e.match(/^(get|post)$/i)&&J.XMLHttpRequest))return new J.ActiveXObject("Microsoft.XMLHTTP");if(J.XMLHttpRequest)return new J.XMLHttpRequest;throw new Error("This browser does not support XMLHttpRequest.")}(o);return new Promise((function(t,n){var u=function(t,n,r,o,i){t({url:e,ok:n,status:r,statusText:o.statusText||"",headers:o.getAllResponseHeaders(),json:function(){return Promise.resolve(JSON.stringify(i))},text:function(){return Promise.resolve(i)}})};s.open(o,e,!0),N(Object.keys(r),(function(e){s.setRequestHeader(e,r[e])})),s.onload=function(){var n="response"in s?s.response:s.responseText,r=1223===s.status?204:s.status;0===r&&(r=n?200:"file"===T(e).protocol?404:0),u(t,r>=200&&r<400,r,s,n)},s.onerror=function(){u(n,!1,s.status,s,"")},s.onabort=function(){u(n,!1,s.status,s,"")},s.ontimeout=function(){u(n,!1,s.status,s,"")},a(s),s.send(i)}))}function l(e,t,n){for(var r="01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="",i=!1,a=0;a<(e||8);a++){var s=Math.floor(Math.random()*r.length);o+=i?x(r[s]):r[s],i=!i}return(t||"")+o+(n||"")}function d(e){return void 0===e||null==e}function f(e){return"object"==typeof e&&"[object Object]"===String(e)}function p(e){return void 0!==e&&"string"==typeof e}function h(e){return!e||!f(e)||0===Object.keys(e).length}function v(e){return"function"==typeof e}function m(e,t){return d(e)?t:e}function b(e){if(d(e))throw new Error("Application is not initialized");return e}function y(e){return e?e.trim():e}function g(e,t){return e.substring(0,t.length)===t}function x(e){return e.toLowerCase()}function w(e){return function(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}(e)?String(e):f(e)||Array.isArray(e)?JSON.stringify(e):v(e.toString)?e.toString():String(e)}function N(e,t,n){for(var r=0;r<e.length;r++)t.call(n,e[r],r)}function k(e,t,n){for(var r=[],o=0;o<e.length;o++)t.call(n,e[o],o)&&r.push(e[o]);return r}function A(e){return e?[].slice.call(e):[]}function C(e,t){var n=Y.createComment(t||" e ");return n.id=e||l(8),n}function E(e,t){return O(e,t)}function O(e,t){var n=Y.createElement(e);v(t)&&t(n,Y);var r={appendTo:function(e){return e.appendChild(n),r},build:function(){return n},child:function(){return n.children[0]},children:function(){return[].slice.call(n.childNodes)}};return r}function I(e){var t=e.parentNode;t&&t.removeChild(e)}function _(e,t){N(Object.keys(e),(function(n){var r=e[n];if(n in t)return f(r)?_(r,t[n]):t[n]=r;o.transfer(t,e,n)}))}function T(e){var t=e;"documentMode"in Y&&(K.setAttribute("href",t),t=K.href),K.href=t;var n=K.hostname;!("[::1]"===K.hostname)&&n.indexOf(":")>-1&&(n="["+n+"]");var r={href:K.href,baseURI:K.baseURI,protocol:K.protocol?K.protocol.replace(/:$/,""):"",host:K.host,search:K.search?K.search.replace(/^\?/,""):"",hash:K.hash?K.hash.replace(/^#/,""):"",hostname:n,port:K.port,pathname:"/"===K.pathname.charAt(0)?K.pathname:"/"+K.pathname,origin:""};return r.origin=r.protocol+"://"+r.host,r}function j(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.split(/\/\//),o=r.length>1?r[0]+"//":"",i=(""===o?r[0]:r[1]).split(/\//),a=[];return N(i,(function(e){return y(e)?a.push(e):null})),N(t,(function(e){return N(e.split(/\//),(function(e){return y(e)?a.push(e):null}))})),o+a.join("/")}function L(e,t){var n=function(e){return"../"===e.substring(0,3)},r=function(e){var t=e.split("/");return/\.html$|\.css$|\.js$/gi.test(e)&&t.pop(),{relative:t.join("/"),parts:t}};if("./"===t.substring(0,2))return r(e).relative+t.substring(1);if(!n(t))return t;var o=r(e).parts;return o.push(function e(t){return n(t)?(o.pop(),e(t.substring(3))):t}(t)),o.join("/")}function V(e){return e?(e.stack="",e):"Unknown Error"}function D(e){return e instanceof Promise&&e.then((function(e){v(e)?e.call():e instanceof Promise&&e.then()})).catch((function(e){return n.error(e)})),e}function R(e,t,n){void 0===n&&(n=!1);var r=null;if(!e)return null;for(var o=0;o<t.length&&!(r=e.attributes[t[o]]);o++);return!d(r)&&n&&e.removeAttribute(r.name),r}function S(e,t){var n=e.attributes||[];return n.getNamedItem(t)||A(n).find((function(e){return e.name===t||g(e.name,t+":")}))}function q(e){return e.root||e}function P(e,t,i){return d(i)&&(i=e.data),f(t)?f(i)&&null==i?(n.error('Invalid targetObject value, expected an "Object Literal" and got "'+typeof i+'".'),t):(a.transform({data:t,context:e}),N(Object.keys(t),(function(e){var n,a;r.once("AfterGet",(function(r){r.onemit=function(e){return n=e},o.descriptor(t,e).get()})),r.once("AfterGet",(function(t){t.onemit=function(e){return a=e};var n=o.descriptor(i,e);n&&v(n.get)&&n.get()})),o.transfer(i,t,e),a&&n&&(N(a.watches,(function(e){-1===n.watches.indexOf(e)&&n.watches.push(e)})),n.notify())})),i):(n.error('Invalid inputData value, expected an "Object Literal" and got "'+typeof t+'".'),i)}function $(e,t,r){var o=void 0;if(e instanceof HTMLElement)o=e;else if("string"==typeof e)try{var i=Y.querySelector(e);if(!i)return n.error('Element with "'+e+'" selector Not Found.'),null;o=i}catch(e){return n.error(V(e)),null}if(d(o))throw n.error('Invalid element provided at app.toJsObj(> "'+e+'" <).');var a=((t=t||{}).names||"[name]").replace(/\[|\]/g,"").split(","),c=(t.values||"[value]").replace(/\[|\]/g,"").split(","),l=function(e,t){return t in e?e[t]:e.getAttribute(t)||e.innerText},p=function(e){var t={},n={BUTTON:!0},o={checkbox:!0,radio:!0};return function e(i){var d=R(i,a);if(d){var f=d.value;if(!0===n[i.tagName])return;if(i instanceof HTMLInputElement&&!0===o[i.type]&&!1===i.checked)return;var p=t[f],h=i.hasAttribute(s.array),m=function(e){var t=void 0;return c.find((function(n){return!!(t=l(e,n))})),t}(i);""!==m&&(t[f]=h?p?u.array(p,m):[m]:p?u.array(p,m):m),v(r)&&D(r(t,f,m,i))}N(A(i.children),(function(t){R(t,[s.build])||e(t)}))}(e),t},m=p(o);return N(A(o.querySelectorAll("[".concat(s.build,"]"))),(function(e){var t=l(e,s.build),n=e.hasAttribute(s.array),o=p(e);(function(e){if(h(e))return!1;for(var t=!1,n=Object.keys(e),r=0;r<n.length;r++)if(!d(n[r])){t=!0;break}return t})(o)&&function t(i,a){var s=i.split("."),c=s[0];s.shift();var l=a[c];return d(l)&&(a[c]={}),0===s.length?(n?f(l)&&!h(l)?a[c]=[u.obj(l,o)]:Array.isArray(l)?l.push(o):a[c]=[o]:d(l)?a[c]=o:a[c]=u.obj(l,o),void(v(r)&&D(r(a,c,o,e)))):Array.isArray(l)?N(l,(function(e){t(s.join("."),e)})):void t(s.join("."),a[c])}(t,m)})),m}function H(e){return e.ownerElement||e.parentNode}function M(e){return"Expected an expression in “"+e.nodeName+"” and got an <empty string>."}function U(e){return"Expected an expression in “"+e.nodeName+"” and got “"+m(e.nodeValue,"")+"”."}var B,z,G,F,X,W,J=window,Y=document,K=O("a").build(),Q=function(){function e(e,t){this.delimiters=[],this.bouer=e,this.delimiters=t}return e.prototype.add=function(e){this.delimiters.push(e)},e.prototype.remove=function(e){var t=this.delimiters.findIndex((function(t){return t.name===e}));this.delimiters.splice(t,1)},e.prototype.run=function(e){var t=this;if(d(e)||""===y(e))return[];var n=null,r=function(e,r){for(var o=0;o<t.delimiters.length;o++){var i=t.delimiters[o],a=e.match(RegExp(i.delimiter.open+"([\\S\\s]*?)"+i.delimiter.close,r||""));if(a)return n=i,a}},o=r(e,"g");return o?o.map((function(e){var t=r(e);return{field:t[0],expression:y(t[1]),delimiter:n}})):[]},e.prototype.shorthand=function(e){if(d(e)||""===y(e))return null;var t=e.match(new RegExp("{([\\w{$,-}]*?)}"));return t?{field:t[0],expression:y(t[1])}:null},e}(),Z=function(){function e(e){this.bouer=e}return e.prototype.execRaw=function(e,t){try{Function(e).call(t||this.bouer)}catch(e){n.error(V(e))}},e.prototype.exec=function(t){var n=u.obj(this.bouer.globalData||{},t.aditional||{},t.data||{},{$root:this.bouer.data,$mixin:u.mixin});return delete t.data,t.data=n,e.run(t)},e.run=function(e){try{return Function("var d$=arguments[0].d;return (function(){var r$;with(d$){"+(!1===e.isReturn?"":"r$=")+e.code+"}return r$;}).apply(this, arguments[0].a)").call(e.context,{d:e.data||{},a:e.args})}catch(e){n.error(V(e))}},e}(),ee=function(){function e(e){var t=this;this._IRT_=!0,this.backgroudColor="",this.waveColor="",this.defaultBackgroudColor="#E2E2E2",this.defaultWaveColor="#ffffff5d",this.identifier="bouer",this.numberOfItems=1,this.reset(),this.bouer=e,this.style=O("style",(function(e){return e.id=t.identifier})).build()}return e.prototype.reset=function(){this.backgroudColor=this.defaultBackgroudColor,this.waveColor=this.defaultWaveColor},e.prototype.init=function(e){var t=this;if(this.style&&(Y.getElementById(this.identifier)||Y.head.appendChild(this.style),this.style.sheet)){for(var n=0;n<this.style.sheet.cssRules.length;n++)this.style.sheet.deleteRule(n);e?(this.backgroudColor=e.background||this.defaultBackgroudColor,this.waveColor=e.wave||this.defaultWaveColor,this.numberOfItems=e.numberOfItems||this.numberOfItems):this.reset();var r=s.skeleton,o=this.backgroudColor,i=["[--s]{ display: none!important; }","["+r+"] { background-color: "+o+"!important; position: relative!important; overflow: hidden; }","["+r+"],["+r+"] * { color: transparent!important; }","["+r+"]::before, ["+r+']::after { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: block; }',"["+r+"]::before { background-color: "+o+"!important; z-index: 1;}","["+r+"]::after { transform: translateX(-100%); background: linear-gradient(90deg, transparent, "+this.waveColor+", transparent); animation: loading 1.5s infinite; z-index: 2; }","@keyframes loading { 100% { transform: translateX(100%); } }","@-webkit-keyframes loading { 100% { transform: translateX(100%); } }"];N(i,(function(e){return t.style.sheet.insertRule(e)})),this.style.innerText=i.join(" ")}},e.prototype.insertItems=function(e){var t=e.parentElement||e.parentNode,n=e;if(null!=t&&!(this.numberOfItems<=1)&&(n.hasAttribute("e-skeleton")||!d(n.querySelector("[e-skeleton]")))){var r=l(6);e.setAttribute("skeleton-clone-code",r);for(var o=0;o<this.numberOfItems-1;o++){var i=e.cloneNode(!0);i.setAttribute("skeleton-cloned",r),t.insertBefore(i,e)}}},e.prototype.clearItems=function(e){var t=e,n=e.parentElement||e.parentNode,r=t.getAttribute("skeleton-clone-code");r&&(t.removeAttribute("skeleton-clone-code"),N([].slice.call(n.querySelectorAll('[skeleton-cloned="'+r+'"]')),(function(e){n.removeChild(e)})))},e.prototype.clear=function(e){e=e?'="'+e+'"':"",N(A(b(this.bouer.el).querySelectorAll("["+s.skeleton+e+"]")),(function(e){return e.removeAttribute(s.skeleton)}))},e}(),te=(B=1,z={isDestroyed:!1},G=new WeakMap,F=function(e,t,n,r){if(e.isDestroyed)throw new Error("Application already disposed.");G.has(e)||G.set(e,new WeakMap),G.get(e).set(t,{ctor:t,isSingleton:m(r,!1),args:n})},X=function(e,t){if(e.isDestroyed)throw new Error("Application already disposed.");var n=G.get(e);if(!n)return null;var r=n.get(t);return null==r?null:r.isSingleton?r.instance?r.instance:r.instance=W(t,r.args,e):W(t,r.args,e)},W=function(e,t,r){var o=[],i={__ctor0:e};return N(t||[],(function(e,t){var a="__arg"+t,s=e;if(e&&s.hasOwnProperty("prototype"))if(r){var u=X(r,s);d(s)?n.warn("Could not create an instance of "+s.name||s+". Make sure it is added as a service in IoC[.app].add(Service)."):e=u}else e=null;i[a]=e,o.push(a)})),Z.run({code:"new __ctor0("+o.join(",")+")",data:i,isReturn:!0})},{add:function(e,t,n){return F(z,e,t||[],n)},resolve:function(e){return X(z,e)},app:function(e){return{add:function(t,n,r){return F(e,t,n||[],r)},resolve:function(t){return X(e,t)},clear:function(){!function(e){G.delete(e)}(e)}}},new:function(e,t,r){return e instanceof me?(n.error("Cannot create an instance of Bouer using IoC"),null):W(e,t||[],r)},newId:function(){return B++}}),ne={run:function(e,t){var n=setInterval((function(){e((function(){return clearInterval(n)}))}),t||10)}},re=function(){function e(e){this._IRT_=!0,this.routeView=null,this.activeAnchors=[],this.base=null,this.bouer=e}return e.prototype.setRouteView=function(e){var t=this;e&&!this.routeView&&(this.routeView=e,this.defaultPage&&this.navigate(Y.location.href),J.addEventListener("popstate",(function(e){e.preventDefault(),t.navigate((e.state||{}).url||location.href,{setURL:!1})})))},e.prototype.init=function(){var e=Y.head.querySelector("base");if(e){var t=e.attributes.getNamedItem("href");if(!t)return n.error('The href="/" attribute is required in base element.');this.base=t.value}else this.base="/";var r=b(this.bouer.el).querySelector("[route-view]");this.setRouteView(r)},e.prototype.navigate=function(e,t){var r=this;if(this.routeView){if(d(e))return n.log("Invalid url provided to the navigation method.");var o=T(e=y(e)),i=m(this.bouer.config.usehash,!0),a=(i?o.hash:o.pathname).split("?")[0];t=t||{},"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));var s=this.toPage(a);if(this.clear(),s&&(s||!e.endsWith(".html"))){var u=E(s.name,(function(e){e.setAttribute("data",f(t.data)?JSON.stringify(t.data):"$data")})).appendTo(this.routeView).build();Y.title=s.title||Y.title,m(t.setURL,!0)&&this.pushState(o.href,Y.title);var c=j(o.baseURI,i?"#":"",s.route);te.app(this.bouer).resolve(he).order(u,this.bouer.data,(function(){r.markActiveAnchorsWithRoute(c)}))}}},e.prototype.pushState=function(e,t){e=T(e).href,Y.location.href!==e&&J.history.pushState({url:e,title:t},t||"",e)},e.prototype.popState=function(e){d(e)&&(e=-1),J.history.go(e)},e.prototype.toPage=function(e){return""===e||"/"===e||e==="/"+j((this.base,"index.html"))?this.defaultPage:te.app(this.bouer).resolve(he).find((function(t){if(!t.route)return!1;var n=t.route.replace(/{(.*?)}/gi,"[\\S\\s]{1,}");return!!Array.isArray(new RegExp("^"+n+"$","i").exec(e))}))||this.notFoundPage},e.prototype.markActiveAnchorsWithRoute=function(e){var t=this,n=this.bouer.config.activeClassName||"active-link",r=b(this.bouer.el),o=r.querySelectorAll("a");d(e)||(N(this.activeAnchors,(function(e){return e.classList.remove(n)})),N([].slice.call(r.querySelectorAll("a."+n)),(function(e){return e.classList.remove(n)})),this.activeAnchors=[],N(A(o),(function(r){r.href.split("?")[0]===e.split("?")[0]&&(r.classList.add(n),t.activeAnchors.push(r))})))},e.prototype.markActiveAnchor=function(e){var t=this.bouer.config.activeClassName||"active-link";d(e)||(N(this.activeAnchors,(function(e){return e.classList.remove(t)})),N([].slice.call(b(this.bouer.el).querySelectorAll("a."+t)),(function(e){return e.classList.remove(t)})),e.classList.add(t),this.activeAnchors=[e])},e.prototype.clear=function(){this.routeView.innerHTML=""},e.prototype.configure=function(e){return!0!==e.isDefault||d(this.defaultPage)?!0!==e.isNotFound||d(this.notFoundPage)?(!0===e.isDefault&&(this.defaultPage=e),void(!0===e.isNotFound&&(this.notFoundPage=e))):n.warn("There are multiple “NotFound Page” provided, check the “"+e.route+"” route."):n.warn("There are multiple “Default Page” provided, check the “"+e.route+"” route.")},e}(),oe=function(e){var t=this;this._IRT_=!0,this.middlewareConfigContainer={},this.run=function(e,n){var r=t.middlewareConfigContainer[e];if(!r)return(n.default||function(){}).call(t.bouer);for(var o=0,i=r[o],a=function(){var e=!1,a=i[n.type];if(a?n.action((function(n,r){Promise.resolve(a.call(t.bouer,n,(function(){e=!0}))).then((function(t){e||r.success(t),r.done()})).catch((function(t){e||r.fail(t),r.done()}))})):(n.default||function(){})(),0==e)return"break";i=r[++o]};null!=i&&"break"!==a(););},this.subscribe=function(e,n){t.middlewareConfigContainer[e]||(t.middlewareConfigContainer[e]=[]);var r={};n.call(t.bouer,(function(e){return r.onBind=e}),(function(e){return r.onUpdate=e})),t.middlewareConfigContainer[e].push(r)},this.has=function(e){var n=t.middlewareConfigContainer[e];return!!n&&n.length>0},this.bouer=e},ie=function(){function e(e,t){this.binds=[],this.DEFAULT_BINDER_PROPERTIES={text:"value",number:"valueAsNumber",checkbox:"checked",radio:"value",contenteditable:"textContent"},this.bouer=e,this.evaluator=t,this.cleanup()}return e.prototype.create=function(e){var t=this,o=e.node,i=e.data,a=e.fields,c=e.isReplaceProperty,l=e.context,p=y(m(o.nodeValue,"")),h=o.nodeName,v=o.ownerElement||o.parentNode,b=te.app(this.bouer).resolve(oe),g=e.onUpdate||function(e,t){},x=v.isActive,k={node:o,data:i,nodeName:h,nodeValue:p,fields:a,parent:v,value:""},C=function(e){b.run(h,{type:e,action:function(e){e({binder:k,detail:{}},{success:function(){},fail:function(){},done:function(){}})}})};return h.substring(0,s.bind.length)===s.bind?function(){var e="",a=v.type;v.hasAttribute("contenteditable")&&(a="contenteditable"),a=a||v.localName,e=s.bind===h?t.DEFAULT_BINDER_PROPERTIES[a]||"value":h.split(":")[1];var c,m,b=v instanceof HTMLSelectElement,E=b&&!0===v.multiple,O=R(v,[":value"],!0),I=O?O.value:"'"+v.value+"'",_=y(p),T={fromDataToInput:function(n){if(!Array.isArray(c)){if("radio"===a)return v.checked=v[e]==n;var r=f(n)?w(n):d(n)?"":n;if(r===v[e])return;return v[e]=r}if(m=m||t.evaluator.exec({data:i,code:I,context:l}),E)return N(A(v.options),(function(e){e.selected=-1!==c.indexOf(y(e.value))}));if(-1===c.indexOf(m))switch(typeof v[e]){case"boolean":v[e]=!1;break;case"number":v[e]=0;break;default:v[e]=""}},fromInputToData:function(e){if(!Array.isArray(c))return t.evaluator.exec({isReturn:!1,context:l,data:u.obj(i,{$vl:e}),code:_+"=$vl"});if(m=m||t.evaluator.exec({data:i,code:I,context:l}),E){var n=[];return N(A(v.options),(function(e){!0===e.selected&&n.push(y(e.value))})),c.splice(0,c.length),c.push.apply(c,n)}e?c.push(m):c.splice(c.indexOf(m),1)}},j=function(e,t){return b&&!E&&Array.isArray(c)&&!I?n.error("Since it's a <select> array binding, it expects the “multiple” attribute in order to bind the multiple values."):E||!Array.isArray(c)||I?T[e](t):n.error('Since it\'s an array binding it expects a model but it has not been defined, provide a model as it follows: value="String-Model" or :value="Object-Model".')};r.once("AfterGet",(function(e){var n=function(){return t.evaluator.exec({data:i,code:_,context:l})};e.onemit=function(e){t.binds.push({isConnected:x,watch:e.onChange((function(){C("onUpdate");var e=n();j("fromDataToInput",e),g(e,o)}),o)})},c=n()})),C("onBind"),j("fromDataToInput",c);var L=["input","propertychange","change"];return-1===L.indexOf(v.localName)&&L.push(v.localName),N(L,(function(t){"change"===t&&"select"!==v.localName||v.addEventListener(t,(function(){return j("fromInputToData",v[e])}),!1)})),v.removeAttribute(o.nodeName),k}():function(){var e=o;h.substring(0,s.property.length)===s.property&&d(c)&&(k.nodeName=h.substring(s.property.length),v.setAttribute(k.nodeName,p),e=v.attributes[k.nodeName],v.removeAttribute(o.nodeName));var n=function(){var n=k.nodeValue,r=!1;if(N(a,(function(e){var a=e.delimiter;a&&"html"===a.name&&(r=!0);var s=t.evaluator.exec({data:i,code:e.expression,context:l});s=d(s)?"":s,n=n.replace(e.field,w(s)),a&&"function"==typeof a.onUpdate&&(n=a.onUpdate(n,o,i))})),k.value=n,!r)return e.nodeValue=n;var s=O("div",(function(e){return e.innerHTML=n})).children();v.innerHTML="",N(s,(function(e){v.appendChild(e),e.isActive=x,te.app(t.bouer).resolve(pe).compile({el:e,data:i,context:l})}),t)};return r.once("AfterGet",(function(e){e.onemit=function(e){t.binds.push({isConnected:x,watch:e.onChange((function(){C("onUpdate"),n(),g(e.propValue,o)}),o)})},n()})),C("onBind"),k.node=e,k}()},e.prototype.remove=function(e,t,n){this.binds=k(this.binds,(function(r){var o=r.watch.node;return(o.ownerElement||o.parentElement)!==e||(d(t)?r.watch.destroy():o.nodeName!==t||n!==r.watch.property&&!d(n)||r.watch.destroy())}))},e.prototype.onPropertyChange=function(e,t,n){var o;return r.once("AfterGet",(function(r){r.onemit=function(e){return o=e.onChange(t)},n[e]})),o},e.prototype.onPropertyInScopeChange=function(e){var t=this,n=[];return r.once("AfterGet",(function(r){r.onemit=function(r){if(!n.find((function(e){return e.property===r.propName&&e.descriptor.propSource===r.propSource}))){var o=!1;n.push(r.onChange((function(){o||(o=!0,e.call(t.bouer,t.bouer),o=!1)})))}},e.call(t.bouer,t.bouer)})),{watches:n,destroy:function(){return N(n,(function(e){return e.destroy()}))}}},e.prototype.cleanup=function(){var e=this;0!=m(this.bouer.config.autoUnbind,!0)&&ne.run((function(){e.binds=k(e.binds,(function(e){if(e.isConnected())return!0;e.watch.destroy()}))}))},e}(),ae=function(){function e(e,t){this._IRT_=!0,this.$events={},this.input=O("input").build(),this.bouer=e,this.evaluator=t,this.cleanup()}return e.prototype.compile=function(e,t,r){var o=this,i=e.ownerElement||e.parentNode,a=e.nodeName;if(d(i))return n.error("Invalid ParentElement of “"+a+"”");var u=y(m(e.nodeValue,"")),c=a.substring(s.on.length).split("."),l=c[0];if(c.shift(),""===u)return n.error("Expected an expression in the “"+a+"” and got an <empty string>.");i.removeAttribute(a);var f=function(e){var i={prevent:"preventDefault",stop:"stopPropagation"};N(c,(function(t){var n=i[t];e[n]&&e[n]()}));var a=[e],s=o.evaluator.exec({data:t,code:u,args:a,aditional:{event:e},context:r});if(v(s))try{s.apply(r,a)}catch(e){n.error(V(e))}},p={},h=["capture","once","passive"];N(c,(function(e){e=e.toLocaleLowerCase(),-1!==h.indexOf(e)&&(p[e]=!0)})),"on"+l in this.input?i.addEventListener(l,f,p):this.on({eventName:l,callback:f,modifiers:p,context:r,attachedNode:i})},e.prototype.on=function(e){var t=this,n=this,r=e.eventName,o=e.callback,i=e.context,a=e.attachedNode,s=e.modifiers,u=function(e){return o.apply(i||t.bouer,[e])},c={eventName:r,attachedNode:a,modifiers:s,callback:u,destroy:function(){return n.off({callback:u,attachedNode:a,eventName:r})},emit:function(e){return t.emit({eventName:r,attachedNode:a,init:(e||{}).init,once:(e||{}).once})}};return this.$events[r]||(this.$events[r]=[]),this.$events[r].push(c),c},e.prototype.off=function(e){var t=e.eventName,n=e.callback,r=e.attachedNode;this.$events[t]&&(this.$events[t]=k(this.$events[t],(function(e){var o=e.eventName===t&&n==e.callback;return(!r||e.attachedNode!==r||!o)&&(e.eventName===t&&e.attachedNode===r&&d(n)?void 0:!o)})))},e.prototype.emit=function(e){var t=this,n=e.eventName,r=e.init,o=e.once,i=e.attachedNode,a=this.$events[n];if(a){var s=function(e,t){e.addEventListener(n,t,{once:!0}),e.dispatchEvent(new CustomEvent(n,r))};this.$events[n]=k(a,(function(e){var a=e.attachedNode,u=m((e.modifiers||{}).once,!1)||m(o,!1);return i?a!==i||(s(a,e.callback),!u):a?(s(a,e.callback),!u):(D(e.callback.call(t.bouer,new CustomEvent(n,r))),!u)}))}},e.prototype.cleanup=function(){var e=this;0!=m(this.bouer.config.autoOffEvent,!0)&&ne.run((function(){N(Object.keys(e.$events),(function(t){e.$events[t]=k(e.$events[t],(function(e){var t;return!1===(e.modifiers||{}).autodestroy||(!e.attachedNode||(!!(null!==(t=e.attachedNode.isActive)&&void 0!==t?t:function(){return e.attachedNode.isConnected})()||void 0))}))}))}))},e}(),se=function(){function e(e){this._IRT_=!0,this.url=e||Y.location.href}return e.prototype.params=function(e){var t={};if(e&&p(e)){var n=this.url.split("?")[0].split("/").reverse();""===n[0]&&n.shift(),N(e.split("/").reverse(),(function(e,r){var o=RegExp("{([\\S\\s]*?)}","ig").exec(e);Array.isArray(o)&&(t[o[1]]=n[r])}))}var r=this.url.split("?")[1];return r?(N(r.split("&"),(function(e){var n=e.split("=");t[n[0]]=(n[1]||"").split("#")[0]})),t):t},e.prototype.add=function(e){var t=[];N(Object.keys(e),(function(n){t.push(n+"="+e[n])}));var n=t.join("&");return this.url.includes("?")?"&"+n:"?"+n},e.prototype.remove=function(e){return e},e}(),ue=function(){function e(e,t){this._IRT_=!0,this.isDestroyed=!1,this.children=[],this.assets=[],this.events=[];var n=void 0,r=void 0,i=void 0;f(e)?(n=e.name,r=e.path,i=e.data,Object.assign(this,e)):r=e,this.name=n||"",this.path=r||"",this.data=a.transform({context:this,data:i||{}});var s={value:(e||{}).template||""};o.set(this,"template",{get:function(){return s.value},set:function(e){return s.value=e}}),he.prepareAssets(this,t||[])}return e.prototype.export=function(e){var t=this;return f(e)?N(Object.keys(e),(function(n){t.data[n]=e[n],o.transfer(t.data,e,n)})):n.log('Invalid object for component.export(...), only "Object Literal" is allowed.')},e.prototype.destroy=function(){var e=this;if(!this.el)return!1;if(!(this.isDestroyed&&this.bouer&&this.bouer.isDestroyed)){this.keepAlive||(this.isDestroyed=!0);var t=te.app(this.bouer).resolve(he);t.emit(this,"beforeDestroy");var n=this.el.parentElement;n&&n.removeChild(this.el),t.emit(this,"destroyed"),N(this.events,(function(t){return e.off(t.eventName,t.callback)})),this.events=[];var r=t.activeComponents;r.splice(r.indexOf(this),1)}},e.prototype.params=function(){return(new se).params(this.route)},e.prototype.on=function(e,t){var r=new Set(["created","beforeMount","mounted","beforeLoad","loaded","beforeDestroy","destroyed"]);new Set(["requested","blocked","failed"]).has(e)&&n.warn("The “"+e+"” Event is called before the component is mounted, to be dispatchedit needs to be on registration object: { "+e+": function(){ ... }, ... }.");var o=te.app(this.bouer).resolve(ae).on({eventName:e,callback:t,attachedNode:this.el,context:this,modifiers:{once:r.has(e),autodestroy:!1}});return this.events.push(o),o},e.prototype.off=function(e,t){te.app(this.bouer).resolve(ae).off({eventName:e,callback:t,attachedNode:this.el}),this.events=k(this.events,(function(n){return!(n.eventName==e&&n.callback==t)}))},e.prototype.set=function(e,t){var n=this,r=P(this,e,t);return N(Object.keys(e),(function(t){return o.transfer(n,e,t)})),r},e}();var ce=function(){function e(){this._IRT_=!0,this.wait={},this.data={},this.req={}}return e.prototype.set=function(e,t,r){if("wait"===e)return n.warn("Only “get” is allowed for type of data");this[e][t]=r},e.prototype.get=function(e,t,n){var r=this[e][t];return!0===n&&this.unset(e,t),r},e.prototype.unset=function(e,t){delete this[e][t]},e}();function le(e){var t=e.node,r=e.bouer,i=e.delimiter,c=e.context,d=e.compiler,f=e.binder,p=e.eventHandler,h=e.data,v=H(t),b=H(v),g=t.nodeName,x=y(m(t.nodeValue,""));if(!x.includes(" of ")&&!x.includes(" as "))return n.error("Expected a valid “for” expression in “"+g+"” and got “"+x+'”.\nValid: e-req="item of url".');if(!v.hasAttribute("skeleton-cloned")){var w,N=i.run(x),k={},A=(t.nodeName.split(":")[1]||"").replace(/\[|\]/g,""),E=C(void 0,"request-"+(A||l(6))),O=function(){},I={node:t,data:h,nodeName:g,nodeValue:x,fields:N,parent:v,value:x};b.insertBefore(E,v);var _=te.app(r).resolve(ee);x.includes(" of ")&&_.insertItems(v),0!==N.length&&(I=f.create({data:h,node:t,fields:N,context:c,isReplaceProperty:!1,onUpdate:function(){return O()}})),v.removeAttribute(t.nodeName);var T=function(e){var t=v.attributes.getNamedItem(s.on+e);return t&&p.compile(t,h,c),{emit:function(t){p.emit({attachedNode:v,eventName:e,init:{detail:t}})}}},j=function(e){var t=e.split("|").map((function(e){return y(e)})),n=t.shift().replace(/\(|\)/g,""),r=" of ",o=n.split(r);return o.length>1||(o=n.split(r=" as ")),{filters:t,type:y(r),expression:y(n),variables:y(o[0]),path:y(o[1])}},L=function(e,t){return e?"data"in e?"of"!==t||Array.isArray(e.data)?"as"!==t||"object"==typeof e.data||(n.error('Using e-req="... “as” ..." the response must be a list of items, and got “'+typeof e.data+"”."),!1):(n.error('Using e-req="... “of” ..." the response must be a list of items, and got “'+typeof e.data+"”."),!1):(n.error("the return must contain the “data” property. Example: { data: {} | [] }"),!1):(n.error("the return must be an object containing “data” property. Example: { data: {} | [] }"),!1)},V=te.app(r).resolve(oe);if(!V.has("req"))return n.error("There is no “req” middleware provided for the “e-req” directive requests.");var D=function(e){return{binder:I,detail:{requestType:e.type,requestPath:e.path,reponseData:k}}};(w=function(){var e=j(y(t.nodeValue||""));T(s.builtInEvents.request).emit(),V.run("req",{type:"onBind",action:function(t){t(D(e),{success:function(t){!function(t){var i;if(L(t,e.type)){if(a.transform({context:c,data:t}),A&&te.app(r).resolve(ce).set("req",A,t),T(s.builtInEvents.response).emit({response:t}),"data"in k)return k.data=t.data;if(k.data=void 0,o.transfer(k,t,"data"),"as"===e.type){var f=y(e.variables.split(",")[0].replace(/\(|\)/g,""));return f in h?n.error("There is already a “"+f+"” defined in the current scope. Provide another variable name in order to continue."):(h[f]=t.data,d.compile({el:v,data:a.transform({context:c,data:h}),context:c}))}if("of"===e.type){_.clearItems(v);var p=l(8,"res"),m=e.expression.replace(e.path,p),b=u.obj(((i={})[p]=t.data,i),h);v.setAttribute(s.for,u.array([m],e.filters).join(" | ")),o.set(b,p,o.descriptor(t,"data")),d.compile({el:v,data:b,context:c})}}}(t)},fail:function(e){return T(s.builtInEvents.fail).emit({error:e})},done:function(){return T(s.builtInEvents.done).emit()}})}})})(),O=function(){var e=j(y(t.nodeValue||""));V.run("req",{type:"onUpdate",default:function(){return w()},action:function(t){t(D(e),{success:function(t){L(t,e.type)&&(k.data=t.data)},fail:function(e){return T(s.builtInEvents.fail).emit({error:e})},done:function(){return T(s.builtInEvents.done).emit()}})}})}}}function de(e){var t=e.node,o=e.binder,i=e.evaluator,c=e.compiler,l=e.eventHandler,p=e.delimiter,h=e.context,v=e.data,b=H(t),g=b.isActive,k=b.parentElement;if(k&&!b.hasAttribute("skeleton-cloned")){var A=C(),E=t.nodeName,O=y(m(t.nodeValue,"")),_=[],T=!1,j=!1,L=function(){};if(""===O)return n.error(M(t));if(!O.includes(" of ")&&!O.includes(" in "))return n.error("Expected a valid “for” expression in “"+E+"” and got “"+O+'”.\nValid: e-for="item of items".');var V=p.run(O);0!==V.length&&o.create({node:t,data:v,fields:V,isReplaceProperty:!0,context:h,onUpdate:function(){return L()}}),b.removeAttribute(E);var D=b.cloneNode(!0);k.replaceChild(A,b);var R=function(e){var n=function(e,n){var r=(U=U||S(y(m(t.nodeValue,"")))).leftHandParts,o=U.sourceValue,i=U.isForOf,s=u.obj(v),c=r[0],l=r[1]||"_index_or_value",d=r[2]||"_for_in_index";return s[c]=e,s[l]=i?n:o[e],s[d]=n,a.transform({data:s,context:h})}(e.item,e.index),r=k.insertBefore(D.cloneNode(!0),e.reference||A);return c.compile({el:r,data:n,context:h,onDone:function(e){return l.emit({eventName:s.builtInEvents.add,attachedNode:e,once:!0})}}),_.splice(e.index,0,{el:r,data:n}),r},S=function(e){var t=e.split("|").map((function(e){return y(e)})),n=t[0].replace(/\(|\)/g,"");t.shift();var r=" of ",o=n.split(r);o.length>1||(o=n.split(r=" in "));var a=o[0],s=o[1],u=a.split(",").map((function(e){return y(e)})),c="of"===y(r)?s:"Object.keys("+s+")";return{filters:t,type:r,leftHand:a,rightHand:s,sourceValue:i.exec({data:v,code:s,context:h}),leftHandParts:u,iterableExpression:c,isForOf:"of"===y(r)}},P=function(e,t){var r=t.split(":").map((function(e){return y(e)}));if(1!=r.length)return function(e,t){T=!0;var r=t[2],o=t[1];if(d(o)||""===o)return n.error("Invalid where-value in “"+E+"” with “"+O+"” expression."),e;if("function"==typeof(o=i.exec({data:v,code:o,context:h})))e=o(e);else{if((d(r)||""===r)&&f(e[0]||""))return n.error("Invalid where-keys in “"+E+"” with “"+O+"” expression, at least one where-key to be provided when using list of object."),e;var a=[];N(e,(function(e){var t=!1;if(d(r))t=w(e).toLowerCase().includes(o.toLowerCase());else for(var n=r.split(",").map((function(e){return y(e)})),s=0;s<n.length;s++){var u=n[s];if(w(i.exec({data:e,code:u,context:h})).toLowerCase().includes(o.toLowerCase())){t=!0;break}}t&&a.push(e)})),e=a}return e}(e,r);n.error("Invalid “"+E+"” where expression “"+O+"”, at least a where-value and where-keys, or a filter-function must be provided")},$=r.on("AfterGet",(function(e){o.binds.push({isConnected:g,watch:e.onChange((function(e,n,r){return function(e){if(T||j)return L();var n=(e=e||{}).method,r=e.args,o=_,i=function(){return Promise.resolve((function(e){var n=(U=U||S(y(m(t.nodeValue,"")))).leftHandParts[1]||"_index_or_value";"_index_or_value"!==n&&N(e,(function(e,t){e.data[n]=t}))})).then((function(e){return e(_)}))};switch(n){case"pop":case"shift":if(d(c=o[n]()))return;if(I(q(c.el)),"pop"===n)return;return i();case"splice":var a=r[0],s=r[1];N(o.splice(a,s),(function(e){return I(q(e.el))}));var u=(U=U||S(y(m(t.nodeValue,"")))).leftHandParts[1]||"_index_or_value";if(N([].slice.call(r,2),(function(e){a++,R({reference:q(_[a].el)||A,index:a,item:e})})),"_index_or_value"===u)return;for(;a<_.length;a++){var c;"number"==typeof(c=_[a].data)[u]&&(c[u]=a)}return;case"push":case"unshift":var l="unshift"==n,f=(_[0]||{}).el||A,p=l?0:o.length,h=l?q(f):A;return N([].slice.call(r),(function(e){var t=R({index:p++,reference:h,item:e});l&&(h=t)})),void(l&&i());default:return L()}}(r)}),t)})})),U=S(O),B=U.filters,z=function(e){return B.filter((function(t){return t.substring(0,e.length)===e}))},G=z("where");N(G,(function(e){return P(U.sourceValue,e)})),$.off(),(L=function(){var e=(U=U||S(y(m(t.nodeValue,"")))).iterableExpression,r=z("order");N(_,(function(e){var t=q(e.el);t.parentElement&&k.removeChild(t)})),_=[],i.exec({data:v,isReturn:!1,context:h,code:"var __e = __each, __fl = __filters, __f = __for; __f(__fl("+e+"), function($$itm, $$idx) { __e($$itm, $$idx); })",aditional:{__for:N,__each:function(e,t){return R({index:t,item:e})},__filters:function(e){var t=u.array(e);N(G,(function(e){return t=P(t,e)}));var o=function(e){var r=e.split(":").map((function(e){return y(e)}));1==r.length?n.error("Invalid “"+E+"” order  expression “"+O+"”, at least the order type must be provided"):t=function(e,t,r){return j=!0,t||(t="asc"),e.sort((function(e,o){var i=function(e,r){if(d(e)||d(r))return 0;switch(x(t)){case"asc":return e?1:-1;case"desc":return r?-1:1;default:return n.log("The “"+t+"” order type is invalid: “"+O+"”. Available types are: “asc”  for order ascendent and “desc” for order descendent."),0}};return r?i(e[r]>o[r],o[r]<e[r]):i(e>o,o<e)}))}(t,r[1],r[2])};return N(r,(function(e){return o(e)})),t}}}),U=null})()}}var fe=function(){function e(e,t,n){this._IRT_=!0,this.customDirectives={},this.compiler=e,this.context=n,this.bouer=e.bouer,this.customDirectives=t,this.evaluator=te.app(this.bouer).resolve(Z),this.delimiter=te.app(this.bouer).resolve(Q),this.binder=te.app(this.bouer).resolve(ie),this.eventHandler=te.app(this.bouer).resolve(ae)}return e.prototype.skip=function(e){({node:e}).node.nodeValue="true"},e.prototype.if=function(e,t){return function(e){var t=e.node,o=e.binder,i=e.evaluator,a=e.compiler,u=e.delimiter,c=e.context,l=e.data,d=H(t),f=d.parentElement;if(f){var p=[],h=f.isActive,v=C(),b=t.nodeName,g=function(){};if(b!==s.elseif&&b!==s.else){var x=d,w=[];f.insertBefore(v,x);var k=function(){if(null==x)return"break";var e=R(x,["e-if","e-else-if","e-else"]);if(!e)return"break";x.isActive=f.isActive;var t=p[0];return"e-if"===e.name&&t&&e.name===t.attr.name?"break":"e-else"!==e.nodeName&&""===y(m(e.nodeValue,""))?{value:n.error(M(e))}:0!==u.run(m(e.nodeValue,"")).length?{value:n.error(U(e))}:(p.push({attr:e,node:x}),"e-else"===e.nodeName?(x.removeAttribute(e.nodeName),"break"):(r.once("AfterGet",(function(t){t.onemit=function(t){-1===w.findIndex((function(e){return e.descriptor.propName==t.propName}))&&w.push({attr:e,descriptor:t})},i.exec({data:l,code:e.value,context:c})})),void x.removeAttribute(e.nodeName)))};do{var A=k();if("object"==typeof A)return A.value;if("break"===A)break}while(x=x.nextElementSibling);N(w,(function(e){o.binds.push({isConnected:h,watch:e.descriptor.onChange((function(){return g()}),e.attr)})})),(g=function(){N(p,(function(e){var t=q(e.node);t.parentElement&&f.removeChild(t)}));var e=p.map((function(e,t){var n=e.attr.value;switch(e.attr.name){case s.if:return"if("+n+"){ __cb("+t+"); }";case s.elseif:return"else if("+n+"){ __cb("+t+"); }";case s.else:return"else{ __cb("+t+"); }"}})).join(" ");i.exec({data:l,isReturn:!1,code:e,context:c,aditional:{__cb:function(e){var t=q(p[e].node);f.insertBefore(t,v),a.compile({el:t,data:l,context:c})}}})})()}}}({binder:this.binder,compiler:this.compiler,context:this.context,delimiter:this.delimiter,evaluator:this.evaluator,data:t,node:e})},e.prototype.show=function(e,t){return function(e){var t=e.node,r=e.binder,o=e.evaluator,i=e.delimiter,a=e.context,s=e.data,u=H(t),c=y(m(t.nodeValue,"")),l=function(e){};if(""===c)return n.error(M(t));if(0!==i.run(c).length)return n.error(U(t));var d=r.create({data:s,node:t,fields:[{expression:c,field:c}],context:a,onUpdate:function(){return l(u)}});(l=function(e){e.style.display=o.exec({data:s,code:c,context:a})?"":"none"})(u),u.removeAttribute(d.node.nodeName)}({binder:this.binder,evaluator:this.evaluator,delimiter:this.delimiter,context:this.context,node:e,data:t})},e.prototype.for=function(e,t){return de({binder:this.binder,compiler:this.compiler,context:this.context,delimiter:this.delimiter,evaluator:this.evaluator,eventHandler:this.eventHandler,data:t,node:e})},e.prototype.def=function(e,t){return function(e){var t=e.node,i=e.bouer,a=e.delimiter,s=e.context,u=e.evaluator,c=e.data,l=H(t),d=y(m(t.nodeValue,""));if(""===d)return n.error(M(t));if(0!==a.run(d).length)return n.error(U(t));var p={},h=r.on("AfterGet",(function(e){e.propName in p||(p[e.propName]=void 0),o.set(p,e.propName,e)})),v=u.exec({data:c,code:d,context:s});if(!f(v))return n.error("Expected a valid Object Literal expression in “"+t.nodeName+"” and got “"+d+"”.");N(Object.keys(v),(function(e){e in p||(p[e]=v[e])})),r.off("AfterGet",h.callback),i.set(p,c),l.removeAttribute(t.nodeName)}({bouer:this.bouer,context:this.context,delimiter:this.delimiter,evaluator:this.evaluator,data:t,node:e})},e.prototype.text=function(e){return function(e){var t=e.node,r=H(t),o=y(m(t.nodeValue,""));if(""===o)return n.error(M(t));r.textContent=o,r.removeAttribute(t.nodeName)}({node:e})},e.prototype.bind=function(e,t){return function(e){var t=e.node,r=e.binder,o=e.delimiter,i=e.context,a=e.data,s=H(t),u=y(m(t.nodeValue,""));return""===u?n.error(M(t)):0!==o.run(u).length?n.error(U(t)):(r.create({node:t,fields:[{field:u,expression:u}],context:i,data:a}),void s.removeAttribute(t.nodeName))}({binder:this.binder,context:this.context,delimiter:this.delimiter,data:t,node:e})},e.prototype.property=function(e,t){return function(e){var t=e.node,r=e.binder,o=e.delimiter,i=e.context,a=e.evaluator,u=e.data,c=H(t),l=y(m(t.nodeValue,"")),d=function(e){},p=function(e){return"Invalid value, expected an Object/Object Literal in “"+e.nodeName+"” and got “"+m(e.nodeValue,"")+"”."};if(""===l)return n.error(p(t));if(0===o.run(l).length){var h=a.exec({data:u,code:l,context:i});if(!f(h))return n.error(p(t));r.create({data:u,node:t,isReplaceProperty:!1,context:i,fields:[{expression:l,field:l}],onUpdate:function(){return d(a.exec({data:u,code:l,context:i}))}}),c.removeAttribute(t.nodeName),(d=function(e){var n=t.nodeName.substring(s.property.length),r=c.attributes[n];if(r||(c.setAttribute(n,""),r=c.attributes[n]),N(Object.keys(e),(function(t){if(!e[t])return r.value=y(r.value.replace(t,""));r.value=r.value.includes(t)?r.value:y(r.value+" "+t)})),""===r.value)return c.removeAttribute(n)})(h)}}({binder:this.binder,context:this.context,delimiter:this.delimiter,evaluator:this.evaluator,node:e,data:t})},e.prototype.data=function(e,t){return function(e){var t=e.node,i=e.bouer,s=e.delimiter,c=e.context,l=e.evaluator,d=e.compiler,p=e.data,h=H(t),v=y(m(t.nodeValue,""));if(0!==s.run(v).length)return n.error("The “data” attribute cannot contain delimiter.");h.removeAttribute(t.nodeName);var b={},g=u.obj(p,{$data:p}),x=r.on("AfterGet",(function(e){e.propName in b||(b[e.propName]=void 0),o.set(b,e.propName,e)}));if(""===v)b=u.obj(i.data);else{var w=l.exec({data:g,code:v,context:c});if(!f(w))return n.error("Expected a valid Object Literal expression in “"+t.nodeName+"” and got “"+v+"”.");N(Object.keys(w),(function(e){e in b||(b[e]=w[e])}))}r.off("AfterGet",x.callback);var k=t.nodeName.split(":")[1];return k&&(k=k.replace(/\[|\]/g,""),te.app(i).resolve(ce).set("data",k,b)),a.transform({context:c,data:b}),d.compile({data:b,el:h,context:c})}({bouer:this.bouer,compiler:this.compiler,delimiter:this.delimiter,evaluator:this.evaluator,context:this.context,node:e,data:t})},e.prototype.href=function(e,t){return function(e){var t=e.node,r=e.bouer,o=e.binder,i=e.delimiter,a=e.context,s=e.data,u=H(t),c=y(m(t.nodeValue,""));if(""===c)return n.error(M(t));var l=j(m(r.config.usehash,!0)?"#":"",c);u.setAttribute("href",l);var d=u.attributes.href,f=i.run(c);0!==f.length&&o.create({data:s,node:d,context:a,fields:f}),u.removeAttribute(t.nodeName),u.addEventListener("click",(function(e){e.preventDefault(),te.app(r).resolve(re).navigate(d.value)}),!1)}({bouer:this.bouer,binder:this.binder,delimiter:this.delimiter,context:this.context,node:e,data:t})},e.prototype.entry=function(e,t){return function(e){var t=e.node,r=e.bouer,o=e.delimiter,i=e.data,a=H(t),s=y(m(t.nodeValue,""));return""===s?n.error(M(t)):0!==o.run(s).length?n.error(U(t)):(a.removeAttribute(t.nodeName),void te.app(r).resolve(he).prepare([{name:s,template:a.outerHTML,data:i}]))}({bouer:this.bouer,delimiter:this.delimiter,node:e,data:t})},e.prototype.put=function(e,t){return function(e){var t=e.node,r=e.bouer,o=e.binder,i=e.delimiter,a=e.context,s=e.data,u=H(t),c=y(m(t.nodeValue,"")),l=function(){};return""===c?n.error(M(t)+" Direct <empty string> injection value is not allowed."):0!==i.run(c).length?n.error("Expected an expression with no delimiter in “"+t.nodeName+"” and got “"+m(t.nodeValue,"")+"”."):(o.create({data:s,node:t,fields:[{expression:c,field:c}],context:a,isReplaceProperty:!1,onUpdate:function(){return l()}}),u.removeAttribute(t.nodeName),void(l=function(){if(u.innerHTML="",""!==(c=y(m(t.nodeValue,"")))){var e=E(c).appendTo(u).build();te.app(r).resolve(he).order(e,s)}})())}({bouer:this.bouer,binder:this.binder,delimiter:this.delimiter,context:this.context,node:e,data:t})},e.prototype.req=function(e,t){return le({bouer:this.bouer,compiler:this.compiler,delimiter:this.delimiter,context:this.context,eventHandler:this.eventHandler,binder:this.binder,node:e,data:t})},e.prototype.wait=function(e){return function(e){var t=e.node,r=e.bouer,o=e.delimiter,i=e.compiler,s=e.context,u=H(t),c=y(m(t.nodeValue,""));if(""===c)return n.error(M(t));if(0!==o.run(c).length)return n.error(U(t));u.removeAttribute(t.nodeName);var l=te.app(r).resolve(ce),d=l.wait[c];if(d){if(d.nodes.push(u),!d.data)return;N(d.nodes,(function(e){i.compile({el:e,context:d.context,data:a.transform({context:d.context,data:d.data})})})),m(d.once,!1)&&delete l.wait[c]}return l.wait[c]={nodes:[u],context:s}}({bouer:this.bouer,compiler:this.compiler,delimiter:this.delimiter,context:this.context,node:e})},e.prototype.custom=function(e,t){return function(e){var t=e.node,n=e.binder,r=e.delimiter,o=e.customDirectives,i=e.context,a=e.data,s=H(t),u=t.nodeName,c=y(m(t.nodeValue,"")),l=r.run(c),d=o[u],f=n.create({data:a,node:t,fields:l,isReplaceProperty:!1,context:i,onUpdate:function(){"function"==typeof d.onUpdate&&d.onUpdate(t,f)}});m(d.removable,!0)&&s.removeAttribute(u);var p=u.split(".");p.shift();var h=(u.split(":")[1]||"").split(".")[0];return f.modifiers=p,f.argument=h,"function"==typeof d.onBind&&m(d.onBind(t,f),!1)}({binder:this.binder,evaluator:this.evaluator,delimiter:this.delimiter,context:this.context,customDirectives:this.customDirectives,node:e,data:t})},e.prototype.skeleton=function(e){return function(e){var t,n=e.node,r=e.bouer;if(""===y(m(n.nodeValue,""))){var o=H(n);o.removeAttribute(n.nodeName);var i=o.getAttribute("skeleton-clone-code");i&&(o.removeAttribute("skeleton-clone-code"),N([].slice.call(null===(t=r.el)||void 0===t?void 0:t.querySelectorAll('[="'+i+'"]')),(function(e){(e.parentElement||e.parentNode).removeChild(e)})))}}({node:e,bouer:this.bouer})},e}(),pe=function(){function e(e,t,n,r,o,i){this._IRT_=!0,this.NODES_TO_IGNORE_IN_COMPILATION={SCRIPT:1,"#comment":8},this.bouer=e,this.directives=null!=i?i:{},this.binder=t,this.delimiter=n,this.eventHandler=r,this.component=o}return e.prototype.compile=function(e){var t,r=this,o=e.el,i=e.context||this.bouer,a=e.data||this.bouer.data,u=te.app(this.bouer).resolve(re);if(!o)return n.error("Invalid element provided to the compiler.");var c=o,l=c.isActive=null!==(t=c.isActive)&&void 0!==t?t:function(){return o.isConnected};if(!this.analize(o.outerHTML))return o;var d=new fe(this,this.directives||{},i),f=function(e,t){if(!(e.nodeName in r.NODES_TO_IGNORE_IN_COMPILATION)){if(e instanceof Element){if(s.skip in e.attributes)return d.skip(e);if(s.def in e.attributes&&d.def(S(e,s.def),t),s.entry in e.attributes&&d.entry(S(e,s.entry),t),s.wait in e.attributes)return d.wait(S(e,s.wait));if(s.for in e.attributes)return d.for(S(e,s.for),t);if(r.component.check(e.localName))return r.component.order(e,t);if(s.if in e.attributes)return d.if(S(e,s.if),t);(s.elseif in e.attributes||s.else in e.attributes)&&n.warn("The “"+s.elseif+"” or “"+s.else+"” requires an element with “"+s.if+"” above."),s.show in e.attributes&&d.show(S(e,s.show),t);var o;if(o=S(e,s.req))return d.req(o,t);var a;if(a=S(e,s.data))return d.data(a,t);if(s.put in e.attributes)return d.put(S(e,s.put),t);if(u.routeView===e)return;N(A(e.attributes),(function(e){f(e,t)}))}if(s.check(e,s.href))return d.href(e,t);if(s.check(e,s.text))return d.text(e);if(s.check(e,s.bind))return d.bind(e,t);if(!Object.keys(d.customDirectives).find((function(t){return s.check(e,t)}))||!d.custom(e,t)){if(s.check(e,s.property)&&!s.isConstant(e.nodeName)&&d.property(e,t),s.check(e,s.skeleton)&&d.skeleton(e),s.check(e,s.on))return r.eventHandler.compile(e,t,i);var c,h;if(c=r.delimiter.shorthand(e.nodeName)){var v=e.ownerElement||e.parentNode,m="e-"+c.expression,b="{{ "+c.expression+" }}";v.setAttribute(m,b);var y=v.attributes.getNamedItem(m);return v.attributes.removeNamedItem(c.field),r.binder.create({node:y,fields:[{expression:c.expression,field:y.value}],context:i,data:t})}p(e.nodeValue)&&(h=r.delimiter.run(e.nodeValue))&&0!==h.length&&r.binder.create({node:e,fields:h,context:i,data:t}),N(A(e.childNodes),(function(e){e.isActive=l,f(e,t)}))}}};return f(o,a),o.hasAttribute&&o.hasAttribute(s.silent)&&o.removeAttribute(s.silent),v(e.onDone)&&D(e.onDone.call(i,o)),this.eventHandler.emit({eventName:s.builtInEvents.compile,attachedNode:o,once:!0,init:{detail:a}}),o},e.prototype.analize=function(e){for(var t="<([a-z0-9-_]{1,}|/[a-z0-9-_]{1,})((.|\n|\r)*?)>",r=e.replace(/<script((.|\n|\r)*?)<\/script>/gm,"<script><\/script>").replace(/<style((.|\n|\r)*?)<\/style>/gm,"<style></style>").replace(/<pre((.|\n|\r)*?)<\/pre>/gm,"<pre></pre>").replace(/<code((.|\n|\r)*?)<\/code>/gm,"<code></code>").replace(/<svg((.|\n|\r)*?)<\/svg>/gm,"<svg></svg>").replace(/<!--((.|\n|\r)*?)-->/gm,"").replace(/&nbsp;/g,"&#160;"),o=[],i=[],a=0,s="",u=!0,c=r.match(new RegExp(t,"ig"))||[],l=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]),d=0;d<c.length;d++){var f=c[d],p=x(f.match(new RegExp(t,"i"))[1]),h="/"===f[1];if(o.push({tag:f,ident:h?a:++a}),!l.has(p))if(i.push({name:p,tag:f}),h){if(a--,!u)continue;var v=i.pop(),m=i.pop();m&&m.name===v.name.substring(1)||(a++,s="Syntax Error: Unexpected token, the openning tag `"+(m.tag||"NoToken")+"` does not match with closing tag: `"+v.tag+"`:\n\n",u=!1,o.push(o[o.length-1]),o[o.length-2]={tag:"<====================== Line Error ======================",ident:a+1})}else;}return u||n.error(s+o.map((function(e,t){return t+1+"."+Array(e.ident).fill("  ").join("")+e.tag})).join("\n")),u},e}(),he=function(){function e(e,t,n,r,o){this._IRT_=!0,this.requests={},this.components={},this.stylesController={},this.activeComponents=[],this.componentDefaultProps=new Set(["name","path","title","route","template","data","keepAlive","assets","prefetch","children","restrictions","isDefault","isNotFound","isDestroyed","clazz","el","bouer","events","_IRT_"]),this.bouer=e,this.delimiter=t,this.eventHandler=n,this.evaluator=r,this.rounting=o}return e.prototype.check=function(e){return e in this.components},e.prototype.request=function(e,t){var r=this;if(!d(this.requests[e]))return this.requests[e].push(t);this.requests[e]=[t];var o=Y.head.querySelector("base"),i=null!=o?o:T("/");c(j(i.baseURI,e.replace(i.baseURI,"")),{headers:{"Content-Type":"text/plain"}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.text()})).then((function(t){N(r.requests[e],(function(n){n.success(t,e)})),delete r.requests[e]})).catch((function(t){o||n.warn('It seems like you are not using the “<base href="/base/components/path/" />” element, try to add as the first child into “<head></head>” element.'),N(r.requests[e],(function(n){return n.fail(t,e)})),delete r.requests[e]}))},e.prototype.prepare=function(e,t){var r=this;N(e,(function(e){var o=e.prototype instanceof ue,i=e;if(o&&((i=te.app(r.bouer).resolve(e)||te.new(e)).clazz=e),(d(i.name)||!i.name)&&(i.name=x(l(8,"templ-component-")),!d(i.path)||!i.path)){var a=i.path.toLowerCase().split("/"),s=a[a.length-1].replace(".html","")||ue.name;r.components[s]&&(s=x(l(8,s+"-component-"))),i.name=s}i.name=i.name.toLowerCase();var u="";if(r.components[i.name])return n.warn("The component name “"+i.name+"” is already define, try changing the “component.name” property.");d(t)||(u=t.route||""),d(i.route)||(i.route="/"+j(u,i.route)),Array.isArray(i.children)&&r.prepare(i.children,i),te.app(r.bouer).resolve(re).configure(r.components[i.name]=i);var c=function(e){e&&r.request(i.path,{success:function(e){i.template=e},fail:function(e){n.error(V(e))}})};return d(i.prefetch)?(i.prefetch=m(r.bouer.config.prefetch,!0))?c(i.path):void 0:!0===i.prefetch?c(i.path):void 0}))},e.prototype.order=function(e,t,r){var o=this,i=x(e.nodeName),a=this.components[i];if(!a)return n.error("No component with name “"+i+"” registered.");var s=function(){var s=function(e){var t;return!0===(t=e instanceof ue&&e.clazz?te.app(o.bouer).resolve(e.clazz)||te.new(e.clazz):e instanceof ue?structuredClone(e):new ue(e)).keepAlive&&(o.components[i]=t),t.template=e.template,t.bouer=o.bouer,t},u=!a.template&&!a.path;return a.template||u?o.insert(e,s(a),t,r):a.path?(o.addEvent("requested",e,a,o.bouer).emit(),void o.request(a.path,{success:function(n){a.template=n,o.insert(e,s(a),t,r)},fail:function(t){n.error("Failed to request <"+i+"/> component with path “"+a.path+"”."),n.error(V(t)),o.addEvent("failed",e,a,o.bouer).emit()}})):n.error("Expected a valid value in `path` or `template` got invalid value at “"+i+"” component.")};if(a.restrictions&&a.restrictions.length>0){var u=[],c=a.restrictions.map((function(e){var t=e.call(o.bouer,a);return!1===t?u.push(e):t instanceof Promise&&t.then((function(t){!1===t&&u.push(e)})).catch((function(){return u.push(e)})),t})),l=this.addEvent("blocked",e,a,this.bouer),d=function(){return l.emit({detail:{component:a.name,message:"Component “"+a.name+"” blocked by restriction(s)",blocks:u}})};return Promise.all(c).then((function(e){e.every((function(e){return 1==e}))?s():d()})).catch((function(){return d()}))}return s()},e.prototype.find=function(e){for(var t=Object.keys(this.components),n=0;n<t.length;n++){var r=this.components[t[n]];if(e(r))return r}return null},e.prototype.addEvent=function(e,t,n,r){var o=this,i=n[e];"function"==typeof i&&this.eventHandler.on({eventName:e,callback:function(e){return i.call(r||n,e)},attachedNode:t,modifiers:{once:!0},context:r||n});return{emit:function(r){return function(r){o.eventHandler.emit({attachedNode:t,once:!0,eventName:e,init:r}),o.eventHandler.emit({eventName:"component:"+e,init:{detail:{component:n}},once:!0})}(r)}}},e.prototype.insert=function(e,t,i,p){var h=this,b=x(e.nodeName),y=e.parentElement,g=te.app(this.bouer).resolve(pe);if(y){if(d(t.template))return n.error("The <"+b+"/> component is not ready yet to be inserted.");if(g.analize(t.template)){this.activeComponents.includes(t)||this.activeComponents.push(t);var w=E("SlotContainer",(function(t){t.innerHTML=e.innerHTML,e.innerHTML=""})).build();(!1===(e.hasAttribute("keep-alive")||m(t.keepAlive,!1))||d(t.el))&&O("body",(function(e){var r=t.path||t.template?t.template:"<div></div>";return e.innerHTML=r,N([].slice.call(e.children),(function(n){-1!==["SCRIPT","LINK","STYLE"].indexOf(n.nodeName)&&(t.assets.push(n),e.removeChild(n))})),0===e.children.length?n.error("The component <"+b+"/> seems to be empty or it has not a root element. Example: <div></div>, to be included."):e.children.length>1?n.error("The component <"+b+"/> seems to have multiple root element, it must have only one root."):void(t.el=e.children[0])}));var C=t.el;if(!d(C)){if(w.childNodes.length>0){var I=function(e){if(e.hasAttribute(s.skip))return!0;var t=e.parentElement;return null!=t&&I(t)},_=A(w.children);N(A(C.querySelectorAll("slot[default]")),(function(e){if(!I(e)){var t=e.parentElement;N(_,(function(n){t.insertBefore(n.cloneNode(!0),e)})),t.removeChild(e)}})),N(A(C.querySelectorAll("slot[name]")),(function(e){if(!I(e)){var t=e.parentElement,n=e.getAttribute("name");N(_,(function(r){("slot"==r.nodeName.toLowerCase()&&r.getAttribute("slot")==n&&N(A(r.childNodes),(function(n){t.insertBefore(n.cloneNode(!0),e)})),"slot"!=r.nodeName.toLowerCase()&&r.getAttribute("slot")==n)&&t.insertBefore(r.cloneNode(!0),e).removeAttribute("slot")})),t.removeChild(e)}}))}var T=k(Object.keys(t),(function(e){return!h.componentDefaultProps.has(e)}));T.length>0&&a.transform({context:t,data:t,keys:T});var j=this.addEvent("created",C,t),R=this.addEvent("beforeMount",C,t),q=this.addEvent("mounted",C,t),P=this.addEvent("beforeLoad",C,t),$=this.addEvent("loaded",C,t);this.addEvent("beforeDestroy",C,t),this.addEvent("destroyed",C,t);var H=k(t.assets,(function(e){return"SCRIPT"===e.nodeName})),M=t.init;v(M)&&D(M.call(t));var U=function(c){try{S(e,s.data)||e.setAttribute("data","$data");var d;if(d=S(e,s.data)){var x=d;0!==h.delimiter.run(x.value).length?n.error("The “data” attribute cannot contain delimiter, source element: <"+b+"/>."):function(e){var s={},c=u.obj(i,{$data:i}),l=r.on("AfterGet",(function(e){e.propName in s||(s[e.propName]=void 0),o.set(s,e.propName,e)}));if(""===e.value)s=u.obj(h.bouer.data);else{var d=te.app(h.bouer).resolve(Z).exec({data:c,code:e.value,context:h.bouer});f(d)?N(Object.keys(d),(function(e){e in s||(s[e]=d[e])})):n.error("Expected a valid Object Literal expression in “"+e.nodeName+"” and got “"+e.value+"”.")}l.off(),s=a.transform({context:t,data:s}),N(Object.keys(s),(function(e){o.transfer(t.data,s,e)}))}(x),e.removeAttribute(x.name)}te.app(h.bouer).resolve(Z).execRaw(c||"",t),j.emit(),N(A(e.attributes),(function(t){if("class"===t.nodeName)return e.classList.forEach((function(e){C.classList.add(e)}));s.silent!=t.name&&C.setAttribute(t.name,t.value)})),R.emit(),"root"in e||o.set(e,"root",{value:C}),y.replaceChild(C,e),q.emit();var w={};C.classList.forEach((function(e){return w[e]=!0}));var E=function(e,t){var n=[],r="STYLE"===e.nodeName;if(e.sheet){for(var o=e.sheet.cssRules,i=function(e){var i=o.item(e);if(!i)return"continue";var a=i,s=a.selectorText;if(s){var u="."+t;a.selectorText=s.split(",").flatMap((function(e){var t=e.split(" ");return t[0]=t[0]+u,[t.join(" "),u+" "+e]})).join(",")}r&&n.push(a.cssText)},a=0;a<o.length;a++)i(a);r&&(e.innerText=n.join(" "))}},O=k(t.assets,(function(e){return"SCRIPT"!==e.nodeName})),I="component-style";if(N(O,(function(e){var n=e.cloneNode(!0);if(n instanceof HTMLLinkElement){var r="/"===t.path[0]?t.path.substring(1):t.path;n.href=L(r,n.getAttribute("href")||""),n.rel="stylesheet"}if(h.stylesController[b]){var o=h.stylesController[b];if(o.elements.indexOf(C)>-1)return;return o.elements.push(C),N(o.styles,(function(e){C.classList.add(e.getAttribute(I))}))}var i=l(5,"e-");if(n.setAttribute(I,i),n instanceof HTMLLinkElement&&n.hasAttribute("scoped")&&(n.onload=function(e){return E(e.target,i)}),h.stylesController[b]={styles:[Y.head.appendChild(n)],elements:[C]},n.hasAttribute("scoped"))return C.classList.add(i),n instanceof HTMLStyleElement?E(n,i):void 0})),P.emit(),g.compile({el:C,context:t,data:a.transform({context:t,data:t.data}),onDone:function(){if(v(p)&&p(t),$.emit(),!h.rounting.routeView){var e=C.hasAttribute("route-vew")?C:C.querySelector("[route-view]");e&&h.rounting.setRouteView(e)}}}),!1===m(h.bouer.config.autoComponentDestroy,!0))return;ne.run((function(e){if(!t.el.isConnected){if(h.bouer.isDestroyed)return e();t.destroy(),e();var n=h.stylesController[t.name];if(n){var r=n.elements.indexOf(t.el);n.elements.splice(r,1),n.elements.length>0||y.isConnected||(N(n.styles,(function(e){return N(A(Y.head.children),(function(t){if(t===e)return Y.head.removeChild(e)}))})),delete h.stylesController[t.name])}}}))}catch(e){n.error("Error in <"+b+"/> component."),n.error(V(e))}};if(0===H.length)return U();var B=[],z=[],G=[],F={};return N(H,(function(e){if(""==e.src||e.innerHTML)B.push(e.innerHTML);else{var n="/"===t.path[0]?t.path.substring(1):t.path;e.src=L(n,e.getAttribute("src")||""),G.push(e.src)}})),0==G.length?U(B.join("\n\n")):N(G,(function(e,t){F[e]=!0,c(e,{headers:{"Content-Type":"text/plain"}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.text()})).then((function(n){if(delete F[e],z[t]=n,0===Object.keys(F).length)return U(u.array(z,B).join("\n\n"))})).catch((function(t){t.stack="",n.error("Error loading the <script src='"+e+"'><\/script> in <"+b+"/> component, remove it in order to be compiled."),n.log(t)}))}))}}}},e.prepareAssets=function(e,t){var r=[],o={js:"script",css:"link",scss:"link",sass:"link",less:"link",styl:"link",style:"link"},i=function(e,t){var r=!(!e&&!y(e));return r||n.error("Invalid asset “src”, in assets["+t+"].src"),r},a=function(e,t){var r=e.split("."),i=o[x(r[r.length-1])];return i||n.error("Couldn't find out what type of asset it is, provide the “type” explicitly at assets["+t+"].type")};N(t,(function(t,s){var u="",c="",l=!0;if("string"==typeof t){if(!i(t,s))return;c=a(y(u=t.replace(/\.less|\.s[ac]ss|\.styl/i,".css")),s)}else{if(!i(y(u=t.src.replace(/\.less|\.s[ac]ss\.styl/i,".css")),s))return;if(t.type)c=o[x(t.type)]||t.type;else if(!(c=a(u,s)))return;l=m(t.scoped,!0)}var f="."===u[0];if(!f||e.path&&!d(e.path)){if(f){var p=e.path.split("/").slice(0,-1);""===p[0]&&p.shift(),u=p.join("/")+u.substring(1,u.length)}var h=E(c,(function(e){switch(m(l,!0)&&e.setAttribute("scoped","true"),x(c)){case"script":default:e.setAttribute("src",u);break;case"link":e.setAttribute("href",u),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css")}})).build();r.push(h)}else n.warn("Component with no `path` cannot use imported assets, check component: "+e.path)})),e.assets.splice(0,e.assets.length),e.assets.push.apply(e.assets,r)},e.prototype.emit=function(e,t,n){te.app(this.bouer).resolve(ae).emit({eventName:t,attachedNode:e.el,init:n})},e}(),ve=function(){function e(){}return e.by=function(e,t){return k(te.app(e).resolve(he).activeComponents,t)},e.byId=function(e,t){return k(te.app(e).resolve(he).activeComponents,(function(e){return e.el&&q(e.el).id==t}))[0]},e.byName=function(e,t){return k(te.app(e).resolve(he).activeComponents,(function(e){return e.name.toLowerCase()==(t||"").toLowerCase()}))},e}(),me=function(){function e(e,t){var r=this;this._IRT_=!0,this.name="Bouer",this.version="3.1.2",this.__id__=te.newId(),this.refs={},this.isDestroyed=!1,this.isInitialized=!1,this.options=t=t||{},this.config=t.config||{},this.deps=t.deps||{},N(Object.keys(this.deps),(function(e){var t=r.deps,n=t[e];t[e]="function"==typeof n?n.bind(r):n}));var i=this,u=t.delimiters||[];te.app(this).add(ce,[],!0),te.app(this).add(Z,[this]),te.app(this).add(oe,[this],!0),te.app(this).add(ie,[this,Z],!0),te.app(this).add(ae,[this,Z],!0),te.app(this).add(he,[this,Q,ae,Z,re],!0),te.app(this).add(ee,[this],!0),te.app(this).add(re,[this],!0),te.app(this).add(Q,[this,u],!0),te.app(this).add(pe,[this,ie,Q,ae,he,t.directives],!0);var c=te.app(this).resolve(ce),l=te.app(this).resolve(oe),f=te.app(this).resolve(he),p=te.app(this).resolve(pe),h=te.app(this).resolve(ee),v=te.app(this).resolve(Q);"function"==typeof t.middleware&&t.middleware.call(this,l.subscribe,this),this.data=a.transform({data:t.data||{},context:this}),this.globalData=a.transform({data:t.globalData||{},context:this}),u.push.apply(u,[{name:"html",delimiter:{open:"{{:html ",close:"}}"}},{name:"common",delimiter:{open:"{{",close:"}}"}}]),this.$routing=te.app(this).resolve(re),this.$delimiters={add:v.add,remove:v.remove,get:function(){return v.delimiters.slice()}},this.$data={get:function(e){return e?c.data[e]:null},set:function(e,t,o){return e in c.data?n.log("There is already a data stored with this key “"+e+"”."):(!0===m(o,!1)&&a.transform({context:i,data:t}),te.app(r).resolve(ce).set("data",e,t))},unset:function(e){return delete c.data[e]}},this.$req={get:function(e){return e?c.req[e]:void 0},unset:function(e){return delete c.req[e]}},this.$wait={get:function(e){if(e){var t=c.wait[e];if(t)return m(t.once,!0)&&r.$wait.unset(e),t.data}},set:function(e,t,n){if(!(e in c.wait))return c.wait[e]={data:t,nodes:[],once:m(n,!1),context:i};var o=c.wait[e];o.data=t,N(o.nodes,(function(e){e&&p.compile({el:e,context:o.context,data:a.transform({context:o.context,data:o.data})})})),m(n,!1)&&r.$wait.unset(e)},unset:function(e){return delete c.wait[e]}},this.$skeleton={clear:function(e){return h.clear(e)},set:function(e){return h.init(e)}},this.$components={add:function(e){return f.prepare([e])},get:function(e){return f.components[e]},viewBy:function(e){return ve.by(r,e)},viewByName:function(e){return ve.byName(r,e)},viewById:function(e){return ve.byId(r,e)}},o.set(this,"refs",{get:function(){var e={};return N(A(b(r.el).querySelectorAll("["+s.ref+"]")),(function(t){var r=y(t.attributes[s.ref].value)||t.name||"";return""===r?n.error("Expected an expression in “"+t.name+"” or at least “name” attribute to combine with “"+t.name+"”."):r in e?(n.warn("The key “"+r+"” in “"+t.name+"” is taken, choose another key."),n.warn(t)):void(e[r]=t)})),e}}),f.prepare(t.components||[]),d(e)||""===y(e)||this.init(e)}return e.create=function(t){return(t=t||{}).config=t.config||{},(t.config||{}).autoUnbind=!1,(t.config||{}).autoOffEvent=!1,(t.config||{}).autoComponentDestroy=!1,new e("",t)},e.toJsObj=function(e,t,n){return $(e,t,n)},e.prototype.init=function(e){var t=this;if(this.isInitialized)return this;if(d(e)||""===y(e))throw n.error(new Error("Invalid selector provided to the instance."));var r=this,o=Y.querySelector(e);if(!(this.el=o))throw n.error(new SyntaxError("Element with selector “"+e+"” not found."));var i=this.options||{},a=te.app(this).resolve(ie),s=te.app(this).resolve(ae),u=te.app(this).resolve(re),c=te.app(this).resolve(ee),l=te.app(this).resolve(pe);return N([i.beforeLoad,i.loaded,i.beforeDestroy,i.destroyed],(function(e){"function"==typeof e&&s.on({eventName:e.name,callback:e,attachedNode:o,modifiers:{once:!0},context:r})})),s.emit({eventName:"beforeLoad",attachedNode:o}),(i.config||{}).autoUnbind=!0,(i.config||{}).autoOffEvent=!0,(i.config||{}).autoComponentDestroy=!0,u.init(),c.init((i.config||{}).skeleton),a.cleanup(),s.cleanup(),this.isInitialized=!0,l.compile({el:this.el,data:this.data,context:this,onDone:function(){return s.emit({eventName:"loaded",attachedNode:o})}}),J.addEventListener("beforeunload",(function(){t.isDestroyed||(s.emit({eventName:"beforeDestroy",attachedNode:o}),t.destroy())}),{once:!0}),ne.run((function(e){if(t.isDestroyed)return e();o.isConnected||(s.emit({eventName:"beforeDestroy",attachedNode:o}),t.destroy(),e())})),Y.head.querySelector('link[rel~="icon"]')||O("link",(function(e){e.rel="icon",e.type="image/png",e.href="https://afonsomatelias.github.io/assets/bouer/img/short.png"})).appendTo(Y.head),this},e.prototype.set=function(e,t){return P(this,e,t)},e.prototype.toJsObj=function(e,t,n){return $(e,t,n)},e.prototype.watch=function(e,t,n){return te.app(this).resolve(ie).onPropertyChange(e,t,n||this.data)},e.prototype.react=function(e){return te.app(this).resolve(ie).onPropertyInScopeChange(e)},e.prototype.on=function(e,t,n){return te.app(this).resolve(ae).on({eventName:e,callback:t,attachedNode:(n||{}).attachedNode,modifiers:(n||{}).modifiers,context:this})},e.prototype.off=function(e,t,n){return te.app(this).resolve(ae).off({eventName:e,callback:t,attachedNode:n})},e.prototype.unbind=function(e,t,n){return te.app(this).resolve(ie).remove(e,n,t)},e.prototype.emit=function(e,t){var n=t||{};return n.init=m(n.init,{}),n.init.detail=m(n.init.detail,{}),u.matcher(n.data||{},n.init.detail||{}),te.app(this).resolve(ae).emit({eventName:e,attachedNode:n.element,init:n.init,once:n.once})},e.prototype.lazy=function(e,t){var n,r=this;t=d(t)?500:t;var o=arguments[2];return function(){var i=[].slice.call(arguments),a=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||e.apply(r,i)}),t),a&&e.apply(r,i)}},e.prototype.compile=function(e){return te.app(this).resolve(pe).compile({el:e.el,data:e.data,context:e.context||this,onDone:e.onDone})},e.prototype.destroy=function(){var e=this.el,t=te.app(this).resolve(ae).$events,n=(t.destroyed||[]).concat(t["component:destroyed"]||[]);this.emit("destroyed",{element:this.el}),N(n,(function(e){return e.emit({once:!0})})),t.destroyed=[],t["component:destroyed"]=[],"BODY"==e.tagName?e.innerHTML="":Y.contains(e)&&e.parentElement.removeChild(e),this.isDestroyed=!0,this.isInitialized=!1,te.app(this).clear()},e}();return me}));